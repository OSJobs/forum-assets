{"version":3,"sources":["_discourse-presence-e57f36062781776a94e63805977fd5f9460cf9dabe57c7d23f482f08b2f6dc7b.js"],"names":["define","exports","_component","_computed","_decorators","_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","_dec","_dec2","_obj","defineProperty","default","extend","on","topic","presenceManager","readOnly","users","shouldDisplay","gt","subscribe","this","get","_destroyed","unsubscribe","getOwnPropertyDescriptor","_runloop","_presenceManager","_dec3","_dec4","_dec5","_dec6","observes","action","post","reply","title","isWhispering","editingUsers","isReply","equal","presenceUsers","postId","filterBy","typing","_throttle","throttlePublish","EDITING","REPLYING","whisper","cancelThrottle","_cancelThrottle","stopEditing","publish","CLOSED","composerClosing","cancel","shouldRender","_","ctx","siteSettings","presence_enabled","Ember","TEMPLATES","HTMLBars","template","id","block","meta","moduleName","_object","_ajax","PresenceManager","subscribed","currentUser","messageBus","init","_super","apply","arguments","setProperties","_this","channel","message","user","state","_appendUser","post_id","parseInt","_removeUser","set","_stopTimer","topicId","throttle","KEEP_ALIVE_DURATION_SECONDS","data","topic_id","is_whisper","ajax","type","existingUser","findBy","removeObject","_cleanUpUsers","staleUsers","last_seen","Date","now","BUFFER_DURATION_SECONDS","push","removeObjects","length","attrs","_this2","usersLength","u","props","limit","pushObject","create","assign","_startTimer","_scheduleTimer","callback","_this3","later","_timer","_pluginApi","initializeDiscoursePresence","api","getCurrentUser","container","lookup","hide_profile_and_presence","modifyClass","setupController","modelFor","name","after","initialize","withPluginApi"],"mappings":"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","sourceRoot":"/assets/plugins"}